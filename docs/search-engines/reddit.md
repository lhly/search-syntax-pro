# Reddit æœç´¢å¼•æ“é€‚é…å™¨æ–‡æ¡£

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **å¼•æ“åç§°** | Reddit |
| **å®˜æ–¹ç½‘ç«™** | https://www.reddit.com |
| **å¸‚åœºå®šä½** | ç¤¾åŒºå†…å®¹æœç´¢å¹³å° |
| **æœˆæ´»ç”¨æˆ·** | 4.3äº¿+ |
| **æ—¥å¸–å­é‡** | 200ä¸‡+ |
| **ä¸»è¦ç”¨æˆ·ç¾¤** | ç¤¾åŒºç”¨æˆ·ã€ç ”ç©¶è€…ã€è¥é”€äººå‘˜ã€å¼€å‘è€… |
| **ä¼˜å…ˆçº§** | **P1 (ä¸­ç­‰)** |
| **å®æ–½å¤æ‚åº¦** | ğŸŸ¡ ä¸­ç­‰ |
| **é¢„è®¡å·¥æœŸ** | 2-3å¤© |

## ğŸ¯ äº§å“ä»·å€¼

### ç”¨æˆ·ä»·å€¼
- âœ… **ç¤¾åŒºæ´å¯Ÿ**: è·å–çœŸå®ç”¨æˆ·è®¨è®ºå’Œè§‚ç‚¹
- âœ… **è¶‹åŠ¿å‘ç°**: äº†è§£çƒ­é—¨è¯é¢˜å’Œç¤¾åŒºåŠ¨æ€
- âœ… **ä¸“ä¸šå†…å®¹**: è®¿é—®å„é¢†åŸŸä¸“å®¶çš„è®¨è®º
- âœ… **UGCæœç´¢**: ç”¨æˆ·ç”Ÿæˆå†…å®¹çš„ç²¾å‡†æœç´¢

### ä¸šåŠ¡ä»·å€¼
- ğŸ“Š å¸‚åœºç ”ç©¶å’Œç”¨æˆ·è°ƒç ”å·¥å…·
- ğŸ¯ å‚ç›´æœç´¢å·®å¼‚åŒ–
- ğŸ’¼ è¥é”€å’Œç¤¾äº¤åª’ä½“åˆ†æ
- ğŸ” å†…å®¹å‘ç°å’Œçµæ„Ÿæ¥æº

## ğŸ” æ”¯æŒçš„æœç´¢è¯­æ³•

### 1. åŸºç¡€è¯­æ³•

#### 1.1 å…³é”®è¯æœç´¢
```
å…³é”®è¯
```

**ç¤ºä¾‹**:
```
Python tutorial
React best practices
```

**è¯´æ˜**: æœç´¢æ ‡é¢˜å’Œæ­£æ–‡ä¸­åŒ…å«å…³é”®è¯çš„å¸–å­

---

#### 1.2 ç²¾ç¡®åŒ¹é… (`"..."`)
```
"å®Œæ•´çŸ­è¯­"
```

**ç¤ºä¾‹**:
```
"how to learn React"
"best programming languages"
```

**è¯´æ˜**: æœç´¢åŒ…å«å®Œæ•´çŸ­è¯­çš„å¸–å­

---

#### 1.3 æ’é™¤å…³é”®è¯ (`-` æˆ– `NOT`)
```
å…³é”®è¯ -æ’é™¤è¯
å…³é”®è¯ NOT æ’é™¤è¯
```

**ç¤ºä¾‹**:
```
Python -Django
React NOT class
```

**è¯´æ˜**: æ’é™¤åŒ…å«æŒ‡å®šè¯çš„ç»“æœ

---

### 2. ç­›é€‰å™¨è¯­æ³•

#### 2.1 Subreddit ç­›é€‰ (`subreddit:`)
```
å…³é”®è¯ subreddit:ç¤¾åŒºå
```

**ç¤ºä¾‹**:
```
tutorial subreddit:learnprogramming
news subreddit:technology
```

**è¯´æ˜**: åªæœç´¢ç‰¹å®šsubredditä¸­çš„å†…å®¹

---

#### 2.2 ä½œè€…ç­›é€‰ (`author:`)
```
å…³é”®è¯ author:ç”¨æˆ·å
```

**ç¤ºä¾‹**:
```
tutorial author:spez
Python author:guido
```

**è¯´æ˜**: åªæœç´¢ç‰¹å®šç”¨æˆ·å‘å¸ƒçš„å¸–å­

---

#### 2.3 URLç­›é€‰ (`url:`)
```
url:ç½‘å€å…³é”®è¯
```

**ç¤ºä¾‹**:
```
url:github.com
url:youtube
```

**è¯´æ˜**: æœç´¢é“¾æ¥åˆ°ç‰¹å®šURLçš„å¸–å­

---

#### 2.4 æ ‡é¢˜æœç´¢ (`title:`)
```
title:å…³é”®è¯
```

**ç¤ºä¾‹**:
```
title:tutorial
title:"best practices"
```

**è¯´æ˜**: åªæœç´¢æ ‡é¢˜ä¸­åŒ…å«å…³é”®è¯çš„å¸–å­

---

#### 2.5 æ­£æ–‡æœç´¢ (`selftext:`)
```
selftext:å…³é”®è¯
```

**ç¤ºä¾‹**:
```
selftext:tutorial
selftext:"step by step"
```

**è¯´æ˜**: åªæœç´¢æ­£æ–‡å†…å®¹ï¼ˆæ–‡æœ¬å¸–å­çš„æ­£æ–‡ï¼‰

---

#### 2.6 å¸–å­ç±»å‹ç­›é€‰ (`self:`)
```
self:yes    # åªæ˜¾ç¤ºæ–‡æœ¬å¸–å­
self:no     # åªæ˜¾ç¤ºé“¾æ¥å¸–å­
```

**ç¤ºä¾‹**:
```
Python tutorial self:yes
news self:no
```

**è¯´æ˜**: 
- `self:yes` - åªæ˜¾ç¤ºè‡ªå‘æ–‡æœ¬å¸–å­
- `self:no` - åªæ˜¾ç¤ºå¤–éƒ¨é“¾æ¥å¸–å­

---

### 3. é€»è¾‘è¿ç®—ç¬¦

#### 3.1 OR é€»è¾‘
```
å…³é”®è¯1 OR å…³é”®è¯2
```

**ç¤ºä¾‹**:
```
Python OR JavaScript
React OR Vue
```

**è¯´æ˜**: æœç´¢åŒ…å«ä»»ä¸€å…³é”®è¯çš„å¸–å­ï¼ˆORå¿…é¡»å¤§å†™ï¼‰

---

#### 3.2 AND é€»è¾‘ (é»˜è®¤)
```
å…³é”®è¯1 å…³é”®è¯2
```

**ç¤ºä¾‹**:
```
Python tutorial beginner
```

**è¯´æ˜**: é»˜è®¤æ‰€æœ‰å…³é”®è¯éƒ½å¿…é¡»å‡ºç°

---

### 4. æ—¶é—´ç­›é€‰

Redditæœç´¢æ”¯æŒæ—¶é—´èŒƒå›´ç­›é€‰ï¼Œä½†ä¸»è¦é€šè¿‡UIè¿›è¡Œï¼š

| æ—¶é—´èŒƒå›´ | å‚æ•°å€¼ | è¯´æ˜ |
|---------|-------|------|
| è¿‡å»1å°æ—¶ | `hour` | æœ€è¿‘1å°æ—¶çš„å†…å®¹ |
| è¿‡å»24å°æ—¶ | `day` | ä»Šå¤©çš„å†…å®¹ |
| è¿‡å»1å‘¨ | `week` | æœ¬å‘¨çš„å†…å®¹ |
| è¿‡å»1æœˆ | `month` | æœ¬æœˆçš„å†…å®¹ |
| è¿‡å»1å¹´ | `year` | ä»Šå¹´çš„å†…å®¹ |
| æ‰€æœ‰æ—¶é—´ | `all` | ä¸é™æ—¶é—´ |

**URLå‚æ•°**: `t=day|week|month|year|all`

---

### 5. æ’åºæ–¹å¼

| æ’åºæ–¹å¼ | å‚æ•°å€¼ | è¯´æ˜ |
|---------|-------|------|
| ç›¸å…³æ€§ | `relevance` | é»˜è®¤æ’åº |
| çƒ­é—¨ | `hot` | æœ€çƒ­é—¨çš„å¸–å­ |
| æœ€æ–° | `new` | æœ€æ–°å‘å¸ƒçš„ |
| è¯„è®ºæ•° | `comments` | è¯„è®ºæœ€å¤šçš„ |
| å¾—åˆ† | `top` | å¾—åˆ†æœ€é«˜çš„ |

**URLå‚æ•°**: `sort=relevance|hot|new|comments|top`

---

## ğŸ”§ æŠ€æœ¯å®ç°

### URL æ„å»ºæ ¼å¼

**åŸºç¡€URL**:
```
https://www.reddit.com/search
```

**æŸ¥è¯¢å‚æ•°**:
```typescript
interface RedditSearchParams {
  q: string;              // æœç´¢æŸ¥è¯¢
  sort?: string;          // æ’åº: relevance|hot|new|comments|top
  t?: string;            // æ—¶é—´èŒƒå›´: hour|day|week|month|year|all
  type?: string;         // æœç´¢ç±»å‹: link|sr (é»˜è®¤link)
  restrict_sr?: boolean; // é™åˆ¶åœ¨å½“å‰subreddit
}
```

**å®Œæ•´URLç¤ºä¾‹**:
```
https://www.reddit.com/search/?q=Python+tutorial+subreddit%3Alearnprogramming&sort=relevance&t=all
```

### é€‚é…å™¨å®ç°æ¨¡æ¿

```typescript
import type { SearchEngineAdapter, SearchParams, SyntaxType, ValidationResult, UIFeatureType } from '@/types'

/**
 * Reddit æœç´¢å¼•æ“é€‚é…å™¨
 * æ”¯æŒç¤¾åŒºå†…å®¹æœç´¢å’Œç”¨æˆ·ç”Ÿæˆå†…å®¹å‘ç°
 */
export class RedditAdapter implements SearchEngineAdapter {
  getName(): string {
    return 'Reddit'
  }

  getBaseUrl(): string {
    return 'https://www.reddit.com/search/'
  }

  /**
   * æ„å»º Reddit æœç´¢æŸ¥è¯¢ URL
   */
  buildQuery(params: SearchParams): string {
    const baseUrl = this.getBaseUrl()
    const query = this.buildSearchQuery(params)
    
    const urlParams = new URLSearchParams({
      q: query,
      sort: 'relevance',
      t: 'all'
    })
    
    return `${baseUrl}?${urlParams.toString()}`
  }

  /**
   * æ„å»ºæœç´¢æŸ¥è¯¢å­—ç¬¦ä¸²
   */
  private buildSearchQuery(params: SearchParams): string {
    const queryParts: string[] = []

    // 1. åŸºç¡€å…³é”®è¯
    if (params.keyword && params.keyword.trim()) {
      queryParts.push(params.keyword.trim())
    }

    // 2. ç²¾ç¡®åŒ¹é…
    if (params.exactMatch && params.exactMatch.trim()) {
      queryParts.push(`"${params.exactMatch.trim()}"`)
    }

    // 3. Subredditç­›é€‰ (ä½¿ç”¨siteä½œä¸ºsubreddit)
    if (params.site && params.site.trim()) {
      queryParts.push(`subreddit:${params.site.trim()}`)
    }

    // 4. ä½œè€…ç­›é€‰ (ä½¿ç”¨fromUserä½œä¸ºauthor)
    if (params.fromUser && params.fromUser.trim()) {
      const author = params.fromUser.replace('@', '')
      queryParts.push(`author:${author}`)
    }

    // 5. URLç­›é€‰
    if (params.inUrl && params.inUrl.trim()) {
      queryParts.push(`url:${params.inUrl.trim()}`)
    }

    // 6. æ ‡é¢˜æœç´¢
    if (params.inTitle && params.inTitle.trim()) {
      queryParts.push(`title:${params.inTitle.trim()}`)
    }

    // 7. æ­£æ–‡æœç´¢
    if (params.inText && params.inText.trim()) {
      queryParts.push(`selftext:${params.inText.trim()}`)
    }

    // 8. æ’é™¤å…³é”®è¯
    if (params.excludeWords && params.excludeWords.length > 0) {
      params.excludeWords.forEach(word => {
        if (word.trim()) {
          queryParts.push(`-${word.trim()}`)
        }
      })
    }

    // 9. OR é€»è¾‘å…³é”®è¯
    if (params.orKeywords && params.orKeywords.length > 0) {
      const orQuery = params.orKeywords
        .filter(word => word.trim())
        .join(' OR ')
      if (orQuery) {
        queryParts.push(`(${orQuery})`)
      }
    }

    return queryParts.join(' ')
  }

  /**
   * éªŒè¯è¯­æ³•ç±»å‹
   */
  validateSyntax(syntax: SyntaxType): boolean {
    const supportedSyntax: SyntaxType[] = [
      'site',        // æ˜ å°„ä¸º subreddit:
      'exact',
      'intitle',
      'inurl',
      'intext',
      'exclude',
      'or',
      'from_user'    // æ˜ å°„ä¸º author:
    ]
    return supportedSyntax.includes(syntax)
  }

  /**
   * è·å–æ”¯æŒçš„è¯­æ³•ç±»å‹
   */
  getSupportedSyntax(): SyntaxType[] {
    return [
      'site',
      'exact',
      'intitle',
      'inurl',
      'intext',
      'exclude',
      'or',
      'from_user'
    ]
  }

  /**
   * è·å–æ”¯æŒçš„UIåŠŸèƒ½ç‰¹æ€§
   */
  getSupportedFeatures(): UIFeatureType[] {
    return [
      'site',           // æ˜¾ç¤ºä¸º"Subreddit"
      'exact_match',
      'intitle',
      'inurl',
      'intext',
      'exclude',
      'or_keywords',
      'from_user'       // æ˜¾ç¤ºä¸º"ä½œè€…"
    ]
  }

  /**
   * éªŒè¯æœç´¢å‚æ•°
   */
  validateParams(params: SearchParams): ValidationResult {
    const errors: string[] = []
    const warnings: string[] = []

    // æ£€æŸ¥åŸºæœ¬å…³é”®è¯
    if (!params.keyword || !params.keyword.trim()) {
      if (!params.exactMatch && !params.site && !params.fromUser) {
        errors.push('è¯·è¾“å…¥æœç´¢å…³é”®è¯')
      }
    }

    // æ£€æŸ¥subredditåç§°
    if (params.site && params.site.trim()) {
      const subredditPattern = /^[a-zA-Z0-9_]{3,21}$/
      if (!subredditPattern.test(params.site.trim())) {
        warnings.push('Subredditåç§°æ ¼å¼å¯èƒ½ä¸æ­£ç¡®')
      }
    }

    // æ£€æŸ¥ç”¨æˆ·å
    if (params.fromUser && params.fromUser.trim()) {
      const username = params.fromUser.replace('@', '')
      const usernamePattern = /^[a-zA-Z0-9_-]{3,20}$/
      if (!usernamePattern.test(username)) {
        warnings.push('ç”¨æˆ·åæ ¼å¼å¯èƒ½ä¸æ­£ç¡®')
      }
    }

    return {
      isValid: errors.length === 0,
      errors,
      warnings
    }
  }

  /**
   * è·å–æœç´¢å»ºè®®
   */
  getSearchSuggestions(params: SearchParams): string[] {
    const suggestions: string[] = []

    if (params.keyword && !params.site) {
      suggestions.push('å°è¯•æ·»åŠ  subreddit: é™å®šæœç´¢ç¤¾åŒº')
    }

    if (params.keyword && !params.fromUser) {
      suggestions.push('ä½¿ç”¨ author: å¯ä»¥æœç´¢ç‰¹å®šç”¨æˆ·çš„å¸–å­')
    }

    if (!params.exactMatch) {
      suggestions.push('ä½¿ç”¨ç²¾ç¡®åŒ¹é…å¯ä»¥æ‰¾åˆ°æ›´å‡†ç¡®çš„è®¨è®º')
    }

    return suggestions
  }
}
```

---

## ğŸ“ å®æ–½æ¸…å•

### Phase 1: æ ¸å¿ƒåŠŸèƒ½ (Day 1)
- [ ] åˆ›å»º `src/services/adapters/reddit.ts`
- [ ] å®ç° `RedditAdapter` ç±»
- [ ] å®ç°åŸºç¡€è¯­æ³• (å…³é”®è¯ã€ç²¾ç¡®åŒ¹é…)
- [ ] å•å…ƒæµ‹è¯•

### Phase 2: ç­›é€‰å™¨ (Day 2)
- [ ] å®ç° subreddit: ç­›é€‰
- [ ] å®ç° author: ç­›é€‰
- [ ] å®ç° url:, title:, selftext: ç­›é€‰
- [ ] å‚æ•°éªŒè¯

### Phase 3: UIé›†æˆ (Day 3)
- [ ] å­—æ®µæ˜ å°„é…ç½® (site â†’ subreddit, fromUser â†’ author)
- [ ] æ—¶é—´èŒƒå›´å’Œæ’åºUI
- [ ] å›½é™…åŒ–ç¿»è¯‘
- [ ] å®Œæ•´æµ‹è¯•

---

## âœ… æµ‹è¯•ç”¨ä¾‹

```typescript
describe('RedditAdapter', () => {
  const adapter = new RedditAdapter()

  test('åŸºç¡€å…³é”®è¯æœç´¢', () => {
    const url = adapter.buildQuery({
      keyword: 'Python tutorial',
      engine: 'reddit'
    })
    expect(url).toContain('q=Python+tutorial')
    expect(url).toContain('sort=relevance')
  })

  test('Subredditç­›é€‰', () => {
    const url = adapter.buildQuery({
      keyword: 'tutorial',
      site: 'learnprogramming',
      engine: 'reddit'
    })
    expect(url).toContain('subreddit%3Alearnprogramming')
  })

  test('ä½œè€…ç­›é€‰', () => {
    const url = adapter.buildQuery({
      keyword: 'announcement',
      fromUser: 'spez',
      engine: 'reddit'
    })
    expect(url).toContain('author%3Aspez')
  })

  test('æ ‡é¢˜å’Œæ­£æ–‡æœç´¢', () => {
    const url = adapter.buildQuery({
      keyword: 'React',
      inTitle: 'tutorial',
      inText: 'beginner',
      engine: 'reddit'
    })
    expect(url).toContain('title%3Atutorial')
    expect(url).toContain('selftext%3Abeginner')
  })

  test('ORé€»è¾‘', () => {
    const url = adapter.buildQuery({
      keyword: 'tutorial',
      orKeywords: ['Python', 'JavaScript'],
      engine: 'reddit'
    })
    expect(url).toContain('Python+OR+JavaScript')
  })

  test('ç»„åˆæŸ¥è¯¢', () => {
    const url = adapter.buildQuery({
      keyword: 'tutorial',
      site: 'programming',
      fromUser: 'expert',
      excludeWords: ['beginner'],
      engine: 'reddit'
    })
    expect(url).toContain('subreddit%3Aprogramming')
    expect(url).toContain('author%3Aexpert')
    expect(url).toContain('-beginner')
  })
})
```

---

## ğŸŒ å›½é™…åŒ–æ”¯æŒ

```json
{
  "engines.reddit": "Reddit",
  "engines.reddit.description": "å…¨çƒæœ€å¤§ç¤¾åŒºå†…å®¹æœç´¢å¹³å°",
  "engines.reddit.features": {
    "subreddit": "Subredditç¤¾åŒº",
    "author": "ä½œè€…ç­›é€‰",
    "selftext": "æ­£æ–‡æœç´¢",
    "title": "æ ‡é¢˜æœç´¢",
    "url": "é“¾æ¥ç­›é€‰"
  },
  "engines.reddit.labels": {
    "site": "Subreddit",
    "fromUser": "ä½œè€… (Redditç”¨æˆ·å)",
    "timeRange": "æ—¶é—´èŒƒå›´",
    "sortBy": "æ’åºæ–¹å¼"
  },
  "engines.reddit.tips": {
    "subreddit": "è¾“å…¥subredditåç§°ï¼ˆä¸å«r/å‰ç¼€ï¼‰",
    "author": "è¾“å…¥Redditç”¨æˆ·åï¼ˆä¸å«u/å‰ç¼€ï¼‰",
    "selftext": "æœç´¢æ–‡æœ¬å¸–å­çš„æ­£æ–‡å†…å®¹"
  }
}
```

---

## ğŸ¨ UIç‰¹æ®Šå¤„ç†

### å­—æ®µæ˜ å°„

Redditä½¿ç”¨ç‰¹æ®Šçš„æœ¯è¯­ï¼Œéœ€è¦åœ¨UIå±‚è¿›è¡Œæ˜ å°„ï¼š

| é€šç”¨å­—æ®µ | Redditæœ¯è¯­ | è¯´æ˜ |
|---------|-----------|------|
| `site` | `subreddit` | ç¤¾åŒºåç§° |
| `fromUser` | `author` | ç”¨æˆ·å |
| `inText` | `selftext` | æ­£æ–‡å†…å®¹ |

### UIæ ‡ç­¾å»ºè®®

```typescript
// UIç»„ä»¶ä¸­çš„ç‰¹æ®Šå¤„ç†
const getFieldLabel = (field: string, engine: SearchEngine) => {
  if (engine === 'reddit') {
    const redditLabels = {
      site: 'Subreddit',
      fromUser: 'Redditç”¨æˆ·',
      inText: 'å¸–å­æ­£æ–‡'
    }
    return redditLabels[field] || field
  }
  return field
}
```

---

## ğŸ“š å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Reddit Search Documentation](https://www.reddit.com/wiki/search/)
- [Reddit API Documentation](https://www.reddit.com/dev/api/)
- [Advanced Reddit Search Guide](https://upvoteshop.io/advanced-reddit-search-guide/)

### æŠ€æœ¯æ–‡ç« 
- [Reddit Search Operators](https://medium.com/@nammooo/reddit-advance-search-operators-and-filters-310206356be1)
- [How to Search Reddit Like a Pro](https://redditschedule.com/how-to-use-reddit-search-like-a-pro-to-find-anything-in-2025/)

---

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### 1. å¸‚åœºç ”ç©¶
```
äº§å“åç§° subreddit:äº§å“ç±»åˆ«
ç”¨æˆ·åé¦ˆ subreddit:reviews
```

### 2. æŠ€æœ¯å­¦ä¹ 
```
æ•™ç¨‹ subreddit:learnprogramming
æœ€ä½³å®è·µ subreddit:programming
```

### 3. è¶‹åŠ¿å‘ç°
```
çƒ­é—¨è¯é¢˜ sort:hot t:week
è®¨è®ºåº¦é«˜ sort:comments t:day
```

### 4. ä¸“å®¶è§‚ç‚¹
```
æŠ€æœ¯è¯é¢˜ author:çŸ¥åä¸“å®¶
è¡Œä¸šåˆ†æ subreddit:è¡Œä¸šç¤¾åŒº
```

---

## ğŸ”„ æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | æ›´æ–°å†…å®¹ |
|------|------|---------|
| 2025-11-09 | v1.0 | åˆå§‹æ–‡æ¡£åˆ›å»ºï¼ŒåŒ…å«ç¤¾åŒºæœç´¢è¯­æ³• |

---

**ä¸‹ä¸€æ­¥**: æŸ¥çœ‹ [GitHub æ–‡æ¡£](./github.md) äº†è§£ä»£ç æœç´¢å¼•æ“çš„å®ç°ç»†èŠ‚
