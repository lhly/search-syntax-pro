# DuckDuckGo æœç´¢å¼•æ“é€‚é…å™¨æ–‡æ¡£

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| **å¼•æ“åç§°** | DuckDuckGo |
| **å®˜æ–¹ç½‘ç«™** | https://duckduckgo.com |
| **å¸‚åœºå®šä½** | éšç§ä¿æŠ¤æœç´¢å¼•æ“ |
| **å…¨çƒå¸‚åœºä»½é¢** | ~2.5% (æŒç»­å¢é•¿) |
| **æ—¥æœç´¢é‡** | è¶…è¿‡1äº¿æ¬¡ |
| **ä¸»è¦ç”¨æˆ·ç¾¤** | éšç§ä¿æŠ¤ç”¨æˆ·ã€æŠ€æœ¯çˆ±å¥½è€…ã€æ¬§ç›Ÿç”¨æˆ· |
| **ä¼˜å…ˆçº§** | **P0 (æœ€é«˜)** |
| **å®æ–½å¤æ‚åº¦** | ğŸŸ¢ ä½ |
| **é¢„è®¡å·¥æœŸ** | 1-2å¤© |

## ğŸ¯ äº§å“ä»·å€¼

### ç”¨æˆ·ä»·å€¼
- âœ… **éšç§ä¿æŠ¤**: ä¸è·Ÿè¸ªç”¨æˆ·æœç´¢å†å²
- âœ… **æ— å¹¿å‘Šå¹²æ‰°**: æœç´¢ç»“æœæ¸…æ™°ç®€æ´
- âœ… **æ— è¿‡æ»¤æ°”æ³¡**: æ¯ä¸ªç”¨æˆ·çœ‹åˆ°ç›¸åŒç»“æœ
- âœ… **å›½é™…åŒ–**: GDPRåˆè§„ï¼Œæ¬§ç›Ÿç”¨æˆ·é¦–é€‰

### ä¸šåŠ¡ä»·å€¼
- ğŸ“ˆ æ‰©å¤§ç”¨æˆ·ç¾¤ä½“ï¼ˆéšç§ä¿æŠ¤ç”¨æˆ·ï¼‰
- ğŸ† å¢å¼ºäº§å“ç«äº‰åŠ›
- ğŸŒ æ”¯æŒå›½é™…åŒ–æˆ˜ç•¥
- ğŸ’¡ éªŒè¯æ¶æ„æ‰©å±•æ€§

## ğŸ” æ”¯æŒçš„æœç´¢è¯­æ³•

### 1. åŸºç¡€è¯­æ³•

#### 1.1 ç½‘ç«™å†…æœç´¢ (`site:`)
```
å…³é”®è¯ site:åŸŸå
```

**ç¤ºä¾‹**:
```
äººå·¥æ™ºèƒ½ site:wikipedia.org
Reactæ•™ç¨‹ site:github.com
```

**è¯´æ˜**: é™å®šæœç´¢ç»“æœåªæ¥è‡ªæŒ‡å®šç½‘ç«™

---

#### 1.2 æ–‡ä»¶ç±»å‹æœç´¢ (`filetype:`)
```
å…³é”®è¯ filetype:æ‰©å±•å
```

**ç¤ºä¾‹**:
```
å¹´åº¦æŠ¥å‘Š filetype:pdf
ç”¨æˆ·æ‰‹å†Œ filetype:docx
æ•°æ®é›† filetype:csv
```

**æ”¯æŒçš„æ–‡ä»¶ç±»å‹**: pdf, doc, docx, xls, xlsx, ppt, pptx, txt, csv, json, xml

---

#### 1.3 ç²¾ç¡®åŒ¹é… (`"..."`)
```
"å®Œæ•´çŸ­è¯­"
```

**ç¤ºä¾‹**:
```
"machine learning tutorial"
"å¦‚ä½•ä½¿ç”¨ React Hooks"
```

**è¯´æ˜**: æœç´¢åŒ…å«å®Œæ•´çŸ­è¯­çš„ç»“æœï¼Œä¿æŒè¯åº

---

#### 1.4 æ’é™¤å…³é”®è¯ (`-`)
```
å…³é”®è¯ -æ’é™¤è¯
```

**ç¤ºä¾‹**:
```
Pythonæ•™ç¨‹ -Django
è‹¹æœ -iPhone -iPad
```

**è¯´æ˜**: æ’é™¤åŒ…å«æŒ‡å®šè¯çš„ç»“æœ

---

### 2. é«˜çº§è¯­æ³•

#### 2.1 æ ‡é¢˜æœç´¢ (`intitle:`)
```
intitle:å…³é”®è¯
```

**ç¤ºä¾‹**:
```
intitle:tutorial React
intitle:"æœ€ä½³å®è·µ"
```

**è¯´æ˜**: åªæœç´¢æ ‡é¢˜ä¸­åŒ…å«å…³é”®è¯çš„é¡µé¢

---

#### 2.2 URLæœç´¢ (`inurl:`)
```
inurl:å…³é”®è¯
```

**ç¤ºä¾‹**:
```
inurl:github
inurl:docs API
```

**è¯´æ˜**: åªæœç´¢URLä¸­åŒ…å«å…³é”®è¯çš„é¡µé¢

---

#### 2.3 OR é€»è¾‘è¿ç®—
```
å…³é”®è¯1 OR å…³é”®è¯2
```

**ç¤ºä¾‹**:
```
Python OR JavaScript æ•™ç¨‹
å‰ç«¯ OR åç«¯ å¼€å‘
```

**è¯´æ˜**: æœç´¢åŒ…å«ä»»ä¸€å…³é”®è¯çš„ç»“æœï¼ˆORå¿…é¡»å¤§å†™ï¼‰

---

#### 2.4 ç»„åˆè¯­æ³•
```
(å…³é”®è¯1 OR å…³é”®è¯2) å…³é”®è¯3
```

**ç¤ºä¾‹**:
```
(React OR Vue) ç»„ä»¶å¼€å‘
site:github.com (Python OR Go) é¡¹ç›®
```

**è¯´æ˜**: ä½¿ç”¨æ‹¬å·ç»„åˆå¤æ‚æŸ¥è¯¢

---

### 3. ç‰¹æ®ŠåŠŸèƒ½

#### 3.1 ç›´æ¥è·³è½¬ (`\`)
```
\å…³é”®è¯
```

**ç¤ºä¾‹**:
```
\Wikipedia
\GitHub
```

**è¯´æ˜**: ç›´æ¥è·³è½¬åˆ°ç¬¬ä¸€ä¸ªæœç´¢ç»“æœï¼ˆI'm Feeling Duckyï¼‰

---

#### 3.2 åŒºåŸŸæœç´¢ (`region:`)
```
å…³é”®è¯ region:å›½å®¶ä»£ç 
```

**ç¤ºä¾‹**:
```
news region:us
æ–°é—» region:cn
```

**è¯´æ˜**: é™å®šæœç´¢ç‰¹å®šåœ°åŒºçš„ç»“æœ

---

## ğŸ”§ æŠ€æœ¯å®ç°

### URL æ„å»ºæ ¼å¼

**åŸºç¡€URL**:
```
https://duckduckgo.com/
```

**æŸ¥è¯¢å‚æ•°**:
```typescript
interface DuckDuckGoParams {
  q: string;           // æœç´¢æŸ¥è¯¢
  t?: string;          // ä¸»é¢˜ (é»˜è®¤: 'h_')
  ia?: string;         // Instant Answer
  kl?: string;         // åœ°åŒºä»£ç  (å¦‚: 'cn-zh', 'us-en')
}
```

**å®Œæ•´URLç¤ºä¾‹**:
```
https://duckduckgo.com/?q=React+tutorial+site%3Agithub.com&t=h_
```

### é€‚é…å™¨å®ç°æ¨¡æ¿

```typescript
import type { SearchEngineAdapter, SearchParams, SyntaxType, ValidationResult, UIFeatureType } from '@/types'

/**
 * DuckDuckGo æœç´¢å¼•æ“é€‚é…å™¨
 * æ”¯æŒéšç§ä¿æŠ¤çš„æœç´¢åŠŸèƒ½
 */
export class DuckDuckGoAdapter implements SearchEngineAdapter {
  getName(): string {
    return 'DuckDuckGo'
  }

  getBaseUrl(): string {
    return 'https://duckduckgo.com/'
  }

  /**
   * æ„å»º DuckDuckGo æœç´¢æŸ¥è¯¢ URL
   */
  buildQuery(params: SearchParams): string {
    const baseUrl = this.getBaseUrl()
    const query = this.buildSearchQuery(params)
    return `${baseUrl}?q=${encodeURIComponent(query)}&t=h_`
  }

  /**
   * æ„å»ºæœç´¢æŸ¥è¯¢å­—ç¬¦ä¸²
   */
  private buildSearchQuery(params: SearchParams): string {
    const queryParts: string[] = []

    // 1. åŸºç¡€å…³é”®è¯
    if (params.keyword && params.keyword.trim()) {
      queryParts.push(params.keyword.trim())
    }

    // 2. ç²¾ç¡®åŒ¹é…
    if (params.exactMatch && params.exactMatch.trim()) {
      queryParts.push(`"${params.exactMatch.trim()}"`)
    }

    // 3. ç½‘ç«™å†…æœç´¢
    if (params.site && params.site.trim()) {
      queryParts.push(`site:${params.site.trim()}`)
    }

    // 4. æ–‡ä»¶ç±»å‹æœç´¢
    if (params.fileType && params.fileType.trim()) {
      queryParts.push(`filetype:${params.fileType.trim()}`)
    }

    // 5. æ ‡é¢˜æœç´¢
    if (params.inTitle && params.inTitle.trim()) {
      queryParts.push(`intitle:${params.inTitle.trim()}`)
    }

    // 6. URLæœç´¢
    if (params.inUrl && params.inUrl.trim()) {
      queryParts.push(`inurl:${params.inUrl.trim()}`)
    }

    // 7. æ’é™¤å…³é”®è¯
    if (params.excludeWords && params.excludeWords.length > 0) {
      params.excludeWords.forEach(word => {
        if (word.trim()) {
          queryParts.push(`-${word.trim()}`)
        }
      })
    }

    // 8. OR é€»è¾‘å…³é”®è¯
    if (params.orKeywords && params.orKeywords.length > 0) {
      const orQuery = params.orKeywords
        .filter(word => word.trim())
        .join(' OR ')
      if (orQuery) {
        queryParts.push(`(${orQuery})`)
      }
    }

    return queryParts.join(' ')
  }

  /**
   * éªŒè¯è¯­æ³•ç±»å‹
   */
  validateSyntax(syntax: SyntaxType): boolean {
    const supportedSyntax: SyntaxType[] = [
      'site',
      'filetype',
      'exact',
      'intitle',
      'inurl',
      'exclude',
      'or'
    ]
    return supportedSyntax.includes(syntax)
  }

  /**
   * è·å–æ”¯æŒçš„è¯­æ³•ç±»å‹
   */
  getSupportedSyntax(): SyntaxType[] {
    return [
      'site',
      'filetype',
      'exact',
      'intitle',
      'inurl',
      'exclude',
      'or'
    ]
  }

  /**
   * è·å–æ”¯æŒçš„UIåŠŸèƒ½ç‰¹æ€§
   */
  getSupportedFeatures(): UIFeatureType[] {
    return [
      'site',
      'filetype',
      'exact_match',
      'intitle',
      'inurl',
      'exclude',
      'or_keywords'
    ]
  }

  /**
   * éªŒè¯æœç´¢å‚æ•°
   */
  validateParams(params: SearchParams): ValidationResult {
    const errors: string[] = []
    const warnings: string[] = []

    // æ£€æŸ¥æ˜¯å¦æœ‰åŸºæœ¬å…³é”®è¯
    if (!params.keyword || !params.keyword.trim()) {
      if (!params.exactMatch && !params.site) {
        errors.push('è¯·è¾“å…¥æœç´¢å…³é”®è¯')
      }
    }

    // æ£€æŸ¥ç½‘ç«™åŸŸåæ ¼å¼
    if (params.site && params.site.trim()) {
      const sitePattern = /^[a-zA-Z0-9][\w\-\.]*\.[a-zA-Z]{2,}$/
      if (!sitePattern.test(params.site.trim())) {
        warnings.push('ç½‘ç«™åŸŸåæ ¼å¼å¯èƒ½ä¸æ­£ç¡®')
      }
    }

    // æ£€æŸ¥æ–‡ä»¶ç±»å‹
    if (params.fileType && params.fileType.trim()) {
      const validTypes = ['pdf', 'doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx', 'txt', 'csv']
      if (!validTypes.includes(params.fileType.toLowerCase())) {
        warnings.push(`æ–‡ä»¶ç±»å‹ "${params.fileType}" å¯èƒ½ä¸è¢«æ”¯æŒ`)
      }
    }

    return {
      isValid: errors.length === 0,
      errors,
      warnings
    }
  }

  /**
   * è·å–æœç´¢å»ºè®®
   */
  getSearchSuggestions(params: SearchParams): string[] {
    const suggestions: string[] = []

    if (params.keyword && !params.site) {
      suggestions.push('å°è¯•æ·»åŠ  site: é™å®šæœç´¢èŒƒå›´')
    }

    if (params.keyword && !params.fileType) {
      suggestions.push('å¯ä»¥ä½¿ç”¨ filetype: æœç´¢ç‰¹å®šæ–‡æ¡£ç±»å‹')
    }

    if (params.keyword && !params.exactMatch) {
      suggestions.push('ä½¿ç”¨ç²¾ç¡®åŒ¹é…è·å¾—æ›´å‡†ç¡®çš„ç»“æœ')
    }

    return suggestions
  }
}
```

---

## ğŸ“ å®æ–½æ¸…å•

### Phase 1: æ ¸å¿ƒåŠŸèƒ½ (Day 1)
- [ ] åˆ›å»º `src/services/adapters/duckduckgo.ts`
- [ ] å®ç° `DuckDuckGoAdapter` ç±»
- [ ] å®ç°åŸºç¡€è¯­æ³•æ”¯æŒ (site, filetype, exact)
- [ ] å•å…ƒæµ‹è¯•ç¼–å†™

### Phase 2: é«˜çº§åŠŸèƒ½ (Day 2)
- [ ] å®ç°é«˜çº§è¯­æ³• (intitle, inurl, OR)
- [ ] å‚æ•°éªŒè¯é€»è¾‘
- [ ] æœç´¢å»ºè®®åŠŸèƒ½
- [ ] é›†æˆæµ‹è¯•

### Phase 3: UIé›†æˆ (Day 2)
- [ ] æ›´æ–° `src/types/index.ts` æ·»åŠ  'duckduckgo' ç±»å‹
- [ ] æ›´æ–° `SearchAdapterFactory` æ³¨å†Œé€‚é…å™¨
- [ ] æ·»åŠ å›½é™…åŒ–ç¿»è¯‘
- [ ] E2Eæµ‹è¯•

---

## âœ… æµ‹è¯•ç”¨ä¾‹

### åŸºç¡€è¯­æ³•æµ‹è¯•

```typescript
describe('DuckDuckGoAdapter', () => {
  const adapter = new DuckDuckGoAdapter()

  test('åŸºç¡€å…³é”®è¯æœç´¢', () => {
    const url = adapter.buildQuery({
      keyword: 'React tutorial',
      engine: 'duckduckgo'
    })
    expect(url).toContain('q=React+tutorial')
  })

  test('ç½‘ç«™å†…æœç´¢', () => {
    const url = adapter.buildQuery({
      keyword: 'JavaScript',
      site: 'github.com',
      engine: 'duckduckgo'
    })
    expect(url).toContain('JavaScript+site%3Agithub.com')
  })

  test('æ–‡ä»¶ç±»å‹æœç´¢', () => {
    const url = adapter.buildQuery({
      keyword: 'å¹´åº¦æŠ¥å‘Š',
      fileType: 'pdf',
      engine: 'duckduckgo'
    })
    expect(url).toContain('filetype%3Apdf')
  })

  test('ç²¾ç¡®åŒ¹é…', () => {
    const url = adapter.buildQuery({
      keyword: 'tutorial',
      exactMatch: 'React Hooks',
      engine: 'duckduckgo'
    })
    expect(url).toContain('%22React+Hooks%22')
  })

  test('æ’é™¤å…³é”®è¯', () => {
    const url = adapter.buildQuery({
      keyword: 'Python',
      excludeWords: ['Django', 'Flask'],
      engine: 'duckduckgo'
    })
    expect(url).toContain('-Django')
    expect(url).toContain('-Flask')
  })

  test('ORé€»è¾‘', () => {
    const url = adapter.buildQuery({
      keyword: 'tutorial',
      orKeywords: ['React', 'Vue'],
      engine: 'duckduckgo'
    })
    expect(url).toContain('React+OR+Vue')
  })
})
```

---

## ğŸŒ å›½é™…åŒ–æ”¯æŒ

### ä¸­æ–‡ç¿»è¯‘é”®å€¼å¯¹

```json
{
  "engines.duckduckgo": "DuckDuckGo",
  "engines.duckduckgo.description": "éšç§ä¿æŠ¤æœç´¢å¼•æ“",
  "engines.duckduckgo.privacy": "ä¸è·Ÿè¸ªç”¨æˆ·æœç´¢å†å²",
  "engines.duckduckgo.features": {
    "site": "ç½‘ç«™å†…æœç´¢",
    "filetype": "æ–‡ä»¶ç±»å‹",
    "intitle": "æ ‡é¢˜æœç´¢",
    "inurl": "URLæœç´¢"
  }
}
```

---

## ğŸ“š å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£
- [DuckDuckGo æœç´¢è¯­æ³•](https://duckduckgo.com/duckduckgo-help-pages/results/syntax/)
- [DuckDuckGo API](https://duckduckgo.com/api)
- [éšç§æ”¿ç­–](https://duckduckgo.com/privacy)

### æŠ€æœ¯æ–‡ç« 
- [DuckDuckGo Advanced Search Guide](https://www.ulpa.jp/post/duckduckgo-search-in-japan-a-complete-guide-for-2025)
- [Mastering DuckDuckGo Search](https://sup.ai/articles/mastering-duckduckgo-a-comprehensive-guide-to-effective-searching)

---

## ğŸ”„ æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | æ›´æ–°å†…å®¹ |
|------|------|---------|
| 2025-11-09 | v1.0 | åˆå§‹æ–‡æ¡£åˆ›å»º |

---

**ä¸‹ä¸€æ­¥**: æŸ¥çœ‹ [Brave Search æ–‡æ¡£](./brave.md) äº†è§£å¦ä¸€ä¸ªéšç§æœç´¢å¼•æ“çš„å®ç°ç»†èŠ‚
